{"version":3,"file":"cate.js","sources":["pages/cate/cate.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZS9jYXRlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"classify\">\n    <!-- 搜索框 -->\n    <view class=\"search\">\r\n      <view class=\"search-content\">\r\n        <uni-icons type=\"search\" size=\"26\" color=\"#9F9F9F\"></uni-icons>\r\n        <!-- 这里使用input组件让用户输入关键词 -->\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"搜索垃圾分类\" \r\n          v-model=\"keyword\" \r\n          class=\"search-input\"\r\n\t\t  @confirm=\"goToSearch\"\r\n        />\r\n      </view>\r\n    </view>\n\n    <!-- 分类部分 -->\n    <view class=\"cate-container\">\n      <view class=\"cate-left\">\n        <view :class=\"['cate-item', activeIndex === index ? 'active' : '']\" \n              :style=\"activeIndex === index ? { '--active-color': activeColors[index] } as any : {}\"\n              v-for=\"(item, index) in cateList\" \n              :key=\"index\" \n              @click=\"changeActive(index)\">\n          {{ item.classifyName }}\n        </view>\n      </view>\n      \n      <scroll-view \n        class=\"cate-right\" \n        scroll-y \n        @scrolltolower=\"loadGoodList\">\n        <view class=\"cate-content\" \n              v-for=\"(goodItem, goodIndex) in goodList\" \n              :key=\"goodIndex\"\n              @click=\"showLajiTips(goodItem)\">\n          <view class=\"content-item\">\n            <view class=\"item-icon\" :class=\"itemIconClass(goodIndex)\"></view>\n            <view class=\"item-text\">{{ goodItem.name }}</view>\n          </view>\n        </view>\n        <view v-if=\"!hasMore\" class=\"no-more\">没有更多了</view>\n      </scroll-view>\n    </view>\n\n    <!-- 弹窗（底部卡片） -->\n    <uni-popup ref=\"tipsPopup\" type=\"center\" background-color=\"#fff\">\n      <view class=\"tips-card\">\n        <view class=\"tips-header\">\n          <text class=\"tips-title\">{{ currentItem?.name }}</text>\n          <text class=\"tips-close\" @click=\"closeTips\">×</text>\n        </view>\n        <view class=\"tips-body\">\n          <text>{{ currentItem?.lajitip || '暂无提示信息' }}</text>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script lang=\"ts\">\r\nimport { useUserStore } from \"@/stores\";\r\nimport { getCate } from '@/api/cate/cate.ts';\r\nimport { CateRequest } from \"../../types/cate\";\r\n\r\n\nexport default {\n  data() {\n    return {\n      cateList: [\n        {\n          classifyId: 1,\n          classifyName: '可回收垃圾'\n        },\n        {\n          classifyId: 2,\n          classifyName: '有害垃圾'\n        },\n        {\n          classifyId: 3,\n          classifyName: '厨余垃圾'\n        },\n        {\n          classifyId: 4,\n          classifyName: '其他垃圾'\n        }\n      ],\n\t\tactiveIndex: 0,\r\n\t\tgoodList: [],\r\n\t\tpage: 1,\r\n\t\thasMore: true,\r\n\t\tactiveColors: ['#2565AE', '#E53122', '#8EC060', '#94918E'],\r\n\t\tcurrentItem: null,\r\n\t\tkeyword: ''\n    };\n  },\n  methods: {\n    async changeActive(i) {\n      this.activeIndex = i;\r\n\t  this.goodList = [];        // 清空旧数据\r\n\t  this.page = 1;             // 重置页码\r\n\t  this.hasMore = true;       // 重置加载状态\r\n\t  await this.loadGoodList(); // 拉取第一页数据\n    },\r\n\tasync loadGoodList() {\r\n\t\tif (!this.hasMore) return;\r\n\t\t\r\n\t\tconst category = this.activeIndex;\r\n\t\tconst page = this.page;\r\n\t\t\r\n\t\tconst getCateData: CateRequest = {\r\n\t\t  category,\r\n\t\t  page\r\n\t\t};\r\n\r\n\t\tuni.showLoading({ title: \"加载中...\" });\r\n\t\ttry {\r\n\t\t  const res = await getCate(getCateData); // 假设封装的请求\r\n\t\t  this.goodList = [...this.goodList, ...res.data.items || []];\r\n\t\t  this.hasMore = res.data.hasMore;\r\n\t\t  this.page++;\r\n\t\t} catch (e) {\r\n\t\t  uni.__f__('error','at pages/cate/cate.vue:124',e);\r\n\t\t} finally {\r\n\t\t  uni.hideLoading();\r\n\t\t}\r\n\t  },\n    goToSearch() {\r\n\t  // 检查是否输入了关键词\r\n\t  if (this.keyword.trim()) {\r\n\t\t// 使用输入的关键词进行跳转\r\n\t\tuni.navigateTo({\r\n\t\t  url: `/subpkg/identify/identify?type=0&searchWord=${this.keyword}`\r\n\t\t});\r\n\t  } else {\r\n\t\t// 可以提示用户输入关键词\r\n\t\tuni.showToast({\r\n\t\t  title: '请输入搜索关键词',\r\n\t\t  icon: 'none'\r\n\t\t});\r\n\t  }\r\n\t},\n    // 根据分类生成对应图标类名\n    itemIconClass(index) {\n      const iconMap = {\n        0: 'recycle-icon',    // 可回收\n        1: 'hazard-icon',     // 有害\n        2: 'food-icon',       // 厨余\n        3: 'other-icon'       // 其他\n      };\n      // 根据当前分类索引获取图标类型\n      // const cateIndex = Math.floor(index / 5); // 假设每类5个项目\n      return iconMap[this.activeIndex] || '';\n    },\r\n\tshowLajiTips(item) {\r\n\t  this.currentItem = item;\r\n\t  (this.$refs.tipsPopup as any).open();\r\n\t},\r\n\tcloseTips() {\r\n\t  (this.$refs.tipsPopup as any).close();\r\n\t}\n  },\n  onLoad() {\n    this.loadGoodList();\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.classify {\n  background: linear-gradient(180deg, #f0f9ff, #ffffff);\n  min-height: 100vh;\n  position: relative;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n\n  /* 搜索栏 */\n  .search {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 134rpx;\n    background: linear-gradient(90deg, #42a5f5, #1e88e5);\n    z-index: 2;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 30rpx;\n    box-sizing: border-box;\n\n    .search-content {\n      width: 100%;\n      max-width: 600rpx;\n      height: 80rpx;\n      background: #fff;\n      border-radius: 100rpx;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      color: #9f9f9f;\n      box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n\n      text {\n        margin-left: 12rpx;\n        font-size: 28rpx;\n      }\n    }\n  }\n\n  /* 分类容器 */\n  .cate-container {\n    width: 100%;\n    display: flex;\n    padding-top: 134rpx;\n    height: calc(100vh - 134rpx);\n\n    /* 左侧分类栏 */\n    .cate-left {\n      position: fixed;\n      top: 134rpx;\n      left: 0;\n      width: 200rpx;\n      height: calc(100vh - 134rpx);\n      background-color: #fff;\n      overflow-y: auto;\n      border-right: 1rpx solid #eee;\n\n      .cate-item {\n        width: 100%;\n        height: 100rpx;\n        line-height: 100rpx;\n        padding-left: 40rpx;\n        box-sizing: border-box;\n        font-size: 28rpx;\n        color: #555;\n        transition: all 0.3s;\n        position: relative;\n      }\n\n      .active {\n        background: #f0f7ff;\n        font-weight: bold;\n        color: var(--active-color);\n\n        &::before {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: 20rpx;\n          width: 8rpx;\n          height: 60rpx;\n          background: var(--active-color);\n          border-radius: 0 4rpx 4rpx 0;\n        }\n      }\n    }\n\n    /* 右侧内容 */\n    .cate-right {\n      margin-left: 200rpx;\n      flex: 1;\n      height: calc(100vh - 134rpx);\n      overflow-y: auto;\n      padding: 20rpx;\n\n      .cate-content {\n        display: flex;\n        flex-direction: column;\n        gap: 24rpx;\n\n        .content-item {\n          display: flex;\n          align-items: center;\n          background: #fff;\n          border-radius: 16rpx;\n          padding: 28rpx 30rpx;\n          box-shadow: 0 6rpx 16rpx rgba(0, 0, 0, 0.06);\n          transition: transform 0.2s, box-shadow 0.2s;\n\n          &:active {\n            transform: scale(0.97);\n            box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.12);\n          }\n\n          .item-icon {\n            width: 56rpx;\n            height: 56rpx;\n            border-radius: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            margin-right: 22rpx;\n            font-size: 28rpx;\n            color: #fff;\n          }\n\n          .recycle-icon {\n            background: linear-gradient(135deg, #42a5f5, #1e88e5);\n          }\n          .hazard-icon {\n            background: linear-gradient(135deg, #ef5350, #d32f2f);\n          }\n          .food-icon {\n            background: linear-gradient(135deg, #81c784, #388e3c);\n          }\n          .other-icon {\n            background: linear-gradient(135deg, #bdbdbd, #757575);\n          }\n\n          .item-text {\n            font-size: 30rpx;\n            color: #333;\n            font-weight: 500;\n          }\n        }\n      }\n\n      .no-more {\n        text-align: center;\n        font-size: 26rpx;\n        color: #aaa;\n        padding: 30rpx 0;\n      }\n    }\n  }\n}\r\n\r\n.tips-card {\n  padding: 30rpx;\n  border-top-left-radius: 24rpx;\n  border-top-right-radius: 24rpx;\n  background: #fff;\n  box-shadow: 0 -6rpx 20rpx rgba(0,0,0,0.08);\n\n  .tips-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20rpx;\n\n    .tips-title {\n      font-size: 34rpx;\n      font-weight: bold;\n      color: #333;\n    }\n\n    .tips-close {\n      font-size: 40rpx;\n      color: #999;\n      padding: 0 10rpx;\n    }\n  }\n\n  .tips-body {\n    font-size: 28rpx;\n    color: #555;\n    line-height: 1.6;\n  }\n}\n\n</style>","import MiniProgramPage from 'D:/2025夏季学期/uni-app_project/uni-app_project/pages/cate/cate.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getCate"],"mappings":";;;AAmEA,MAAe,YAAA;AAAA,EACb,OAAO;AACE,WAAA;AAAA,MACL,UAAU;AAAA,QACR;AAAA,UACE,YAAY;AAAA,UACZ,cAAc;AAAA,QAChB;AAAA,QACA;AAAA,UACE,YAAY;AAAA,UACZ,cAAc;AAAA,QAChB;AAAA,QACA;AAAA,UACE,YAAY;AAAA,UACZ,cAAc;AAAA,QAChB;AAAA,QACA;AAAA,UACE,YAAY;AAAA,UACZ,cAAc;AAAA,QAChB;AAAA,MACF;AAAA,MACJ,aAAa;AAAA,MACb,UAAU,CAAC;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,MACT,cAAc,CAAC,WAAW,WAAW,WAAW,SAAS;AAAA,MACzD,aAAa;AAAA,MACb,SAAS;AAAA,IAAA;AAAA,EAET;AAAA,EACA,SAAS;AAAA,IACP,MAAM,aAAa,GAAG;AACpB,WAAK,cAAc;AACtB,WAAK,WAAW;AAChB,WAAK,OAAO;AACZ,WAAK,UAAU;AACf,YAAM,KAAK;IACV;AAAA,IACH,MAAM,eAAe;AACpB,UAAI,CAAC,KAAK;AAAS;AAEnB,YAAM,WAAW,KAAK;AACtB,YAAM,OAAO,KAAK;AAElB,YAAM,cAA2B;AAAA,QAC/B;AAAA,QACA;AAAA,MAAA;AAGFA,oBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAC/B,UAAA;AACI,cAAA,MAAM,MAAMC,sBAAQ,WAAW;AAChC,aAAA,WAAW,CAAC,GAAG,KAAK,UAAU,GAAG,IAAI,KAAK,SAAS,CAAA,CAAE;AACrD,aAAA,UAAU,IAAI,KAAK;AACnB,aAAA;AAAA,eACE,GAAG;AACND,sBAAAA,MAAA,MAAM,SAAQ,8BAA6B,CAAC;AAAA,MAAA,UAChD;AACAA,sBAAA,MAAI,YAAY;AAAA,MAClB;AAAA,IACC;AAAA,IACC,aAAa;AAEV,UAAA,KAAK,QAAQ,QAAQ;AAE1BA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,+CAA+C,KAAK,OAAO;AAAA,QAAA,CACjE;AAAA,MAAA,OACO;AAERA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AAAA,MACA;AAAA,IACF;AAAA;AAAA,IAEG,cAAc,OAAO;AACnB,YAAM,UAAU;AAAA,QACd,GAAG;AAAA;AAAA,QACH,GAAG;AAAA;AAAA,QACH,GAAG;AAAA;AAAA,QACH,GAAG;AAAA;AAAA,MAAA;AAIE,aAAA,QAAQ,KAAK,WAAW,KAAK;AAAA,IACtC;AAAA,IACH,aAAa,MAAM;AACjB,WAAK,cAAc;AAClB,WAAK,MAAM,UAAkB;IAChC;AAAA,IACA,YAAY;AACT,WAAK,MAAM,UAAkB;IAChC;AAAA,EACC;AAAA,EACA,SAAS;AACP,SAAK,aAAa;AAAA,EACpB;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrKA,GAAG,WAAW,eAAe;"}