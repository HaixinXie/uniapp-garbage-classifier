{"version":3,"file":"home.js","sources":["pages/home/home.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"banner\">\n      <swiper \n        indicator-dots \n        indicator-color=\"rgba(255,255,255,0.5)\"\n        indicator-active-color=\"#fff\" \n        circular \n        autoplay \n        interval=\"4000\"\n      >\n        <swiper-item v-for=\"(item, index) in carouselList\" :key=\"index\">\n          <view class=\"image-container\">\n            <image \n              :src=\"item.imageUrl\" \n              mode=\"aspectFill\" \n              lazy-load\n              @load=\"handleImageLoaded(index)\"\n              class=\"carousel-image\"\n              :class=\"{'image-loaded': imageLoadStates[index]}\"\n            ></image>\n            <!-- 图片加载中指示器 -->\n            <view \n              class=\"loading-indicator\" \n              :class=\"{'hidden': imageLoadStates[index]}\"\n            ></view>\n          </view>\n        </swiper-item>\n      </swiper>\n    </view>\r\n\t<!-- 基础用法 -->\r\n\t<!-- 自定义搜索组件 -->\r\n\t<view class=\"page-container\">\r\n\t    <!-- 搜索组件使用，添加完整事件监听 -->\r\n\t    <uni-mysearch \r\n\t      placeholder=\"请输入要查询的垃圾\"\r\n\t      iconColor=\"#3370FF\"\r\n\t      :rightIcons=\"[{ type: 'camera-filled' }]\"  \r\n\t      @input=\"handleInput\"\r\n\t      @confirm=\"handleConfirm\"\r\n\t      @focus=\"handleFocus\"\r\n\t      @blur=\"handleBlur\"\r\n\t      @clear=\"handleClear\"\r\n\t      @iconClick=\"handleIconClick\"\r\n\t      @rightIconClick=\"handleRightIconClick\"\r\n\t    />\r\n\t    \r\n\t    <!-- 搜索结果展示区域 -->\r\n\t    <view v-if=\"searchResult\" class=\"result-container\">\r\n\t      <view class=\"result-title\">搜索结果：{{ searchValue }}</view>\r\n\t      <view class=\"result-content\">{{ searchResult }}</view>\r\n\t    </view>\r\n\t  </view>\r\n\t  <view class=\"grid-container\">\r\n\t      <!-- 四宫格布局 -->\r\n\t      <view class=\"grid-items\">\r\n\t        <view \r\n\t          v-for=\"(item, index) in gridData\" \r\n\t          :key=\"index\" \r\n\t          class=\"grid-item\"\r\n\t          @click=\"goToDetail(item.url, index)\"\r\n\t        >\r\n\t          <image \r\n\t            :src=\"item.image\" \r\n\t            mode=\"aspectFill\" \r\n\t            class=\"grid-image\"\r\n\t          ></image>\r\n\t          <text class=\"grid-text\">{{ item.title }}</text>\r\n\t        </view>\r\n\t      </view>\r\n\t    </view>\r\n\t\t\r\n\t\t<view class=\"hot-knowledge-section\">\r\n\t\t  <view class=\"section-title\">热门知识</view>\r\n\t\t  <view class=\"card-container\">\r\n\t\t    <view \r\n\t\t      v-for=\"(item, index) in hotKnowledge\" \r\n\t\t      :key=\"index\" \r\n\t\t      class=\"knowledge-card\" \r\n\t\t      @click=\"goToKnowledge(item)\"\r\n\t\t    >\r\n\t\t      <image :src=\"item.image\" class=\"card-image\" />\r\n\t\t      <view class=\"card-content\">\r\n\t\t        <text class=\"card-title\">{{ item.title }}</text>\r\n\t\t        <text class=\"card-desc\">{{ item.desc }}</text>\r\n\t\t      </view>\r\n\t\t    </view>\r\n\t\t  </view>\r\n\t\t</view>\r\n\n  </view>\n</template>\r\n\n<script>\r\n\r\nconst app = getApp()\r\n\nexport default {\n  data() {\n    return {\n      carouselList: [\n        { imageUrl: '/static/home/Carousel/image-1.jpg' },\n        { imageUrl: '/static/home/Carousel/image-2.jpg' },\n        { imageUrl: '/static/home/Carousel/image-3.jpg' }\n      ],\n      imageLoadStates: [false, false, false], // 每张图片的加载状态\r\n\t  searchValue: '',\r\n\t  searchResult: '',\r\n\t  // 内置动态数据\r\n\t\tgridData: [\r\n\t\t  {\r\n\t\t\tid: 1,\r\n\t\t\ttitle: '环保知识学习',\r\n\t\t\timage: '/static/home/grid-container/study.svg',\r\n\t\t\turl: '/subpkg/ecoLearn/ecoLearn'\r\n\t\t  },\r\n\t\t  {\r\n\t\t\tid: 2,\r\n\t\t\ttitle: '考试得积分',\r\n\t\t\timage: '/static/home/grid-container/question.svg',\r\n\t\t\turl: '/pages/exam/exam'\r\n\t\t  },\r\n\t\t  {\r\n\t\t\tid: 3,\r\n\t\t\ttitle: '投放指南',\r\n\t\t\timage: '/static/home/grid-container/guide.svg',\r\n\t\t\turl: '/subpkg/guide/guide'\r\n\t\t  },\r\n\t\t  {\r\n\t\t\tid: 4,\r\n\t\t\ttitle: '全部分类',\r\n\t\t\timage: '/static/home/grid-container/cate.svg',\r\n\t\t\turl: '/pages/cate/cate'\r\n\t\t  }\r\n\t\t],\r\n\t\thotKnowledge: [\r\n\t\t\t{\r\n\t\t\t  id: 1,\r\n\t\t\t  title: '如何正确投放可回收物',\r\n\t\t\t  desc: '纸张、塑料、金属等可回收物应分类投放，保持干净整洁。',\r\n\t\t\t  image: '/static/home/hotKnowledge/hotKnowledge01.jpg',\r\n\t\t\t  url: '/subpkg/recycleGuide/recycleGuide'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t  id: 2,\r\n\t\t\t  title: '厨余垃圾处理小技巧',\r\n\t\t\t  desc: '厨余垃圾应去除包装袋，尽量沥干水分投放。',\r\n\t\t\t  image: '/static/home/hotKnowledge/hotKnowledge02.jpg',\r\n\t\t\t  url: '/subpkg/kitchenWasteTips/kitchenWasteTips'\r\n\t\t\t}\r\n\t\t  ]\n    }\n  },\n  methods: {\n    handleImageLoaded(index) {\n      // 更新对应图片的加载状态\n      this.$set(this.imageLoadStates, index, true);\n    },\r\n\t// 跳转到详情页\r\n\tgoToDetail(url, index) {\r\n\t  if (url) {\r\n\t\tif(index == 1) {\r\n\t\t\tapp.globalData.selected = 3;\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: url\r\n\t\t\t});\r\n\t\t}else if(index == 3) {\r\n\t\t\tapp.globalData.selected = 1;\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: url\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t  url: url\r\n\t\t\t});\r\n\t\t}\r\n\t  } else {\r\n\t\tuni.showToast({\r\n\t\t  title: '暂无跳转链接',\r\n\t\t  icon: 'none'\r\n\t\t});\r\n\t  }\r\n\t},\r\n\t// 输入事件处理\r\n\thandleInput(value) {\r\n\t  this.searchValue = value;\r\n\t  console.log('输入内容:', value);\r\n\t  \r\n\t  // 这里可以添加实时搜索逻辑\r\n\t  if (value.trim()) {\r\n\t\tthis.realTimeSearch(value);\r\n\t  }\r\n\t},\r\n\t\r\n\t// 确认搜索事件处理\r\n\thandleConfirm(value) {\r\n\t  const keyword = value.trim();\r\n\t    if (!keyword) {\r\n\t      uni.showToast({\r\n\t        title: '请输入要查询的垃圾',\r\n\t        icon: 'none'\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t    \r\n\t    // 跳转到识别页面，type=0表示文字检索\r\n\t    uni.navigateTo({\r\n\t      url: `/subpkg/identify/identify?type=0&searchWord=${keyword}`\r\n\t    });\r\n\t},\r\n\t\r\n\t// 聚焦事件处理\r\n\thandleFocus(e) {\r\n\t  console.log('搜索框聚焦');\r\n\t  // 可以添加聚焦时的动画效果或提示\r\n\t},\r\n\t\r\n\t// 失焦事件处理\r\n\thandleBlur(e) {\r\n\t  console.log('搜索框失焦');\r\n\t},\r\n\t\r\n\t// 清除搜索内容事件处理\r\n\thandleClear() {\r\n\t  console.log('清除搜索内容');\r\n\t  this.searchValue = '';\r\n\t  this.searchResult = '';\r\n\t},\r\n\t\r\n\t// 左侧图标点击事件处理\r\n\thandleIconClick() {\r\n\t  const keyword = this.searchValue.trim();\r\n\t  if (!keyword) {\r\n\t    uni.showToast({\r\n\t      title: '请输入要查询的垃圾',\r\n\t      icon: 'none'\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  // 跳转到文字识别页面，type=0表示文字搜索\r\n\t  uni.navigateTo({\r\n\t    url: `/subpkg/identify/identify?type=0&searchWord=${keyword}`\r\n\t  });\r\n\t},\r\n\t\r\n\t// 右侧图标点击事件处理\r\n\thandleRightIconClick(index) {\r\n\t  this.startCameraRecognition();\r\n\t},\r\n\t\r\n\t// 实时搜索功能\r\n\trealTimeSearch(keyword) {\r\n\t  // 这里可以实现实时搜索建议\r\n\t  // 示例：模拟搜索建议\r\n\t  console.log('实时搜索建议:', keyword);\r\n\t},\r\n\t\r\n\t// 查询垃圾类型\r\n\tqueryGarbageType(keyword) {\r\n\t  uni.showLoading({\r\n\t\ttitle: '查询中...'\r\n\t  });\r\n\t  \r\n\t  // 模拟API请求\r\n\t  setTimeout(() => {\r\n\t\tuni.hideLoading();\r\n\t\t\r\n\t\t// 这里应该替换为真实的垃圾分类API调用\r\n\t\tconst garbageTypes = {\r\n\t\t  '苹果': '厨余垃圾',\r\n\t\t  '纸张': '可回收物',\r\n\t\t  '电池': '有害垃圾',\r\n\t\t  '塑料袋': '其他垃圾',\r\n\t\t  // 可以添加更多垃圾类型...\r\n\t\t};\r\n\t\t\r\n\t\tthis.searchResult = garbageTypes[keyword] || '未找到该垃圾的分类信息';\r\n\t  }, 800);\r\n\t},\r\n\t\r\n\t\r\n\t// 拍照识别功能\r\n\tstartCameraRecognition() {\r\n\t  uni.chooseImage({\r\n\t\tcount: 1,\r\n\t\tsuccess: (res) => {\r\n\t\t  const tempFilePath = res.tempFilePaths[0];\r\n\t\t  uni.navigateTo({\r\n\t\t  \t\t\turl: `/subpkg/identify/identify?type=1&tempFilePath=${tempFilePath}`\r\n\t\t  });\r\n\t\t},\r\n\t\tfail: (err) => {\r\n\t\t\tconsole.error('选择图片失败：', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t  title: '选择图片失败',\r\n\t\t\t  icon: 'none'\r\n\t\t\t});\r\n\t\t  }\r\n\t  });\r\n\t},\r\n\tgoToKnowledge(item) {\r\n\t  uni.navigateTo({\r\n\t\turl: item.url\r\n\t  });\r\n\t}\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.container {\n  width: 100%;\n  overflow: hidden;\n}\n\n.banner {\n  width: 100%;\n  position: relative;\n  \n  // 使用 padding-bottom 保持比例\n  &:before {\n    content: \"\";\n    display: block;\n    width: 100%;\n    padding-bottom: 56.25%; // 16:9 比例\n  }\n  \n  swiper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.image-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.carousel-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  opacity: 0; // 默认隐藏图片\n  transition: opacity 0.3s ease;\n  \n  &.image-loaded {\n    opacity: 1; // 图片加载完成后显示\n  }\n}\n\n.loading-indicator {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #f5f5f5;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  \n  // 加载动画\n  &:after {\n    content: \"\";\n    width: 30rpx;\n    height: 30rpx;\n    border: 2rpx solid #ccc;\n    border-top-color: #389bff;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  &.hidden {\n    display: none;\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\r\n\r\n/* 四宫格布局样式 */\n.grid-container {\n  padding: 20rpx;\n  box-sizing: border-box;\n}\n\n.grid-items {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n}\n\n.grid-item {\n  width: calc(25% - 20rpx); /* 每个项占25%宽度，减去间距 */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 20rpx;\n  box-sizing: border-box;\n}\r\n\n.grid-image {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 16rpx;\n  margin-bottom: 12rpx;\n  // box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\n}\n\n.grid-text {\n  font-size: 24rpx;\n  color: #333;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n}\r\n\r\n.hot-knowledge-section {\n  margin-top: 40rpx;\n  padding: 0 20rpx;\n\n  .section-title {\n    font-size: 32rpx;\n    font-weight: bold;\n    margin-bottom: 20rpx;\n  }\n\n  .card-container {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .knowledge-card {\n    width: 48%; // 两张卡片左右排列\n    background-color: #fff;\n    border-radius: 16rpx;\n    overflow: hidden;\n    box-shadow: 0 4rpx 8rpx rgba(0,0,0,0.05);\n  }\n\n  .card-image {\n    width: 100%;\n    height: 150rpx;\n    object-fit: cover;\n  }\n\n  .card-content {\n    padding: 16rpx;\n  }\n\n  .card-title {\n    font-size: 28rpx;\n    font-weight: 600;\n    margin-bottom: 10rpx;\n  }\n\n  .card-desc {\r\n\tdisplay: block;\n    font-size: 24rpx;\n    color: #666;\n    line-height: 32rpx;\n  }\n}\n\r\n\n</style>","import MiniProgramPage from 'D:/2025夏季学期/uni-app_project/uni-app_project/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}